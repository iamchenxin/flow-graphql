{"version":3,"sources":["validation/rules/UniqueInputFieldNames.js"],"names":[],"mappings":";;;;;;;;;;QAcgB;QAUA;;AAbhB;;;;;;;;;;;;;AAGO,SAAS,0BAAT,CAAoC,SAApC,EAA+D;AACpE,uDAAmD,gBAAnD,CADoE;CAA/D;;;;;;;;AAUA,SAAS,qBAAT,CAA+B,OAA/B,EAAgE;AACrE,MAAM,iBAAiB,EAAjB,CAD+D;AAErE,MAAI,aAAa,sBAAc,IAAd,CAAb,CAFiE;;AAIrE,SAAO;AACL,iBAAa;AACX,8BAAQ;AACN,uBAAe,IAAf,CAAoB,UAApB,EADM;AAEN,qBAAa,sBAAc,IAAd,CAAb,CAFM;OADG;AAKX,8BAAQ;AACN,qBAAa,eAAe,GAAf,EAAb,CADM;OALG;KAAb;AASA,sCAAY,MAAM;AAChB,UAAM,YAAY,KAAK,IAAL,CAAU,KAAV,CADF;AAEhB,UAAI,WAAW,SAAX,CAAJ,EAA2B;AACzB,gBAAQ,WAAR,CAAoB,wBAClB,2BAA2B,SAA3B,CADkB,EAElB,CAAE,WAAW,SAAX,CAAF,EAAyB,KAAK,IAAL,CAFP,CAApB,EADyB;OAA3B,MAKO;AACL,mBAAW,SAAX,IAAwB,KAAK,IAAL,CADnB;OALP;AAQA,aAAO,KAAP,CAVgB;KAVb;GAAP,CAJqE;CAAhE","file":"validation/rules/UniqueInputFieldNames.js","sourcesContent":["/* @flow */\n/**\n *  Copyright (c) 2015, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n */\n\nimport type { ValidationContext } from '../index';\nimport { GraphQLError } from '../../error';\n\n\nexport function duplicateInputFieldMessage(fieldName: string): string {\n  return `There can be only one input field named \"${fieldName}\".`;\n}\n\n/**\n * Unique input field names\n *\n * A GraphQL input object value is only valid if all supplied fields are\n * uniquely named.\n */\nexport function UniqueInputFieldNames(context: ValidationContext): any {\n  const knownNameStack = [];\n  let knownNames = Object.create(null);\n\n  return {\n    ObjectValue: {\n      enter() {\n        knownNameStack.push(knownNames);\n        knownNames = Object.create(null);\n      },\n      leave() {\n        knownNames = knownNameStack.pop();\n      }\n    },\n    ObjectField(node) {\n      const fieldName = node.name.value;\n      if (knownNames[fieldName]) {\n        context.reportError(new GraphQLError(\n          duplicateInputFieldMessage(fieldName),\n          [ knownNames[fieldName], node.name ]\n        ));\n      } else {\n        knownNames[fieldName] = node.name;\n      }\n      return false;\n    }\n  };\n}\n"],"sourceRoot":"/home/iamchenxin/project/fork/graphql-js/src"}